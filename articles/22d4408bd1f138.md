---
title: "fast-check „Åß Property Based Testing „ÇíË©¶„Åó„Å¶„Åø„Çã"
emoji: "üêí"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["fast-check","typescript","test", "jest"]
published: true
---

Property Based Testing „É©„Ç§„Éñ„É©„É™„ÅÆ fast-check „ÇíË©¶„Åó„Å¶„Åø„Åü„ÅÆ„Åß„Åæ„Å®„ÇÅ„Åæ„Åô„ÄÇ

# Property Based Testing„Å®„ÅØÔºü

Property Based Testing „ÅØ„ÄÅHaskell „ÅÆ„É©„Ç§„Éñ„É©„É™ [QuickCheck](https://hackage.haskell.org/package/QuickCheck) „Åã„Çâ„ÅØ„Åò„Åæ„Å£„Åü„ÉÜ„Çπ„Éà„Çπ„Çø„Ç§„É´„Åß„ÄÅÂÆöÁæ©„Åï„Çå„ÅüÊù°‰ª∂„Å´Âêà„Çè„Åõ„Å¶Ëá™ÂãïÁîüÊàê„Åï„Çå„ÅüËÜ®Â§ß„Å™ÂÄ§„Å´ÂØæ„Åó„Å¶„ÉÜ„Çπ„Éà„ÇíË°å„ÅÜÊâãÊ≥ï„Åß„Åô„ÄÇProperty Based Testing „ÅÆ„É©„Ç§„Éñ„É©„É™„Å´ÂÖ•ÂäõÂÄ§„ÅÆÊù°‰ª∂„ÇíÊ∏°„Åô„Å®„ÄÅ„Åù„ÅÆÊù°‰ª∂„Åã„ÇâË§áÊï∞„ÅÆ„ÉÜ„Çπ„Éà„Ç±„Éº„Çπ„ÇíËá™ÂãïÁîüÊàê„ÅóÂÆüË°å„Åó„Å¶„Åè„Çå„Åæ„Åô„ÄÇ

Áü≠„ÅÑ„Ç≥„Éº„Éâ„ÅßËÜ®Â§ß„Å™„ÉÜ„Çπ„Éà„Ç±„Éº„Çπ„ÇíÊ§úË®º„Åß„Åç„ÇãÁÇπ„ÄÅ„ÉÜ„Çπ„Éà„Ç±„Éº„Çπ„ÅåÈñãÁô∫ËÄÖ„Å´‰æùÂ≠ò„Åõ„ÅöÊÑèÂõ≥„Åó„Å™„ÅÑ„Ç®„ÉÉ„Ç∏„Ç±„Éº„Çπ„Çí„ÉÜ„Çπ„Éà„Åß„Åç„ÇãÁÇπ„Åå„É°„É™„ÉÉ„Éà„Å®„Åó„Å¶„ÅÇ„Çä„Åæ„Åô„ÄÇ


ÔºàÂèÇËÄÉÔºâ

https://kotest.io/docs/proptest/property-based-testing.html

https://medium.com/criteo-engineering/introduction-to-property-based-testing-f5236229d237

# fast-check„Å®„ÅØÔºü

fast-check „ÅØ JavaScript „Åß Property Based Testing „ÇíÂÆüÁèæ„Åô„Çã„Åü„ÇÅ„ÅÆ„É©„Ç§„Éñ„É©„É™„Åß„Åô„ÄÇ

https://github.com/dubzzz/fast-check

Jest „ÇÑ mocha „Å™„Å©„ÅÆ„ÉÜ„Çπ„Éà„ÉÜ„Ç£„É≥„Ç∞„Éï„É¨„Éº„É†„Å®‰ΩµÁî®„Åó„Å¶Âà©Áî®„Åó„Åæ„Åô„ÄÇÂü∫Êú¨ÁöÑ„Å™Êõ∏„ÅçÊñπ„ÅØ„Åì„Å°„Çâ„Åß„Åô„ÄÇ

```ts
it('sample test', () => {
  fc.assert( // Property Based Testing „ÅÆ„É©„É≥„Éä„Éº
    fc.property(
      fc.nat(), // ÂÖ•ÂäõÂÄ§„ÅÆÊù°‰ª∂„ÄÇ nat()„ÅØÊ≠£„ÅÆÊï¥Êï∞
      num => { // ÂÆüÈöõ„Å´expect„ÇíÂÆüË°å„Åô„Çã„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÄÇÂºïÊï∞„Å´„ÅØÂÖ•ÂäõÂÄ§„ÅÆÊù°‰ª∂„Å´Ê≤ø„Å£„Å¶ÁîüÊàê„Åï„Çå„Åü„É©„É≥„ÉÄ„É†„Å™ÂÄ§„ÅåÂÖ•„Çã„ÄÇÊ®ôÊ∫ñ„Åß100ÂõûÂÆüË°å„Åï„Çå„Çã„ÄÇ
        expect(testMethod(num)).toBe('FizzBuzz')
      }
    )
  )
})
```

ÂÖ•ÂäõÂÄ§„ÅÆÊù°‰ª∂„ÅØ Number, Boolean„ÄÅString „Å™„Å©„ÅÆÂü∫Êú¨„Éá„Éº„ÇøÂûã„Åã„Çâ„ÄÅJSON„ÄÅDate„ÄÅuuid Á≠â„ÅÆ„Ç´„Çπ„Çø„É†„Å™„Éá„Éº„ÇøÂûã„Åæ„ÅßÊüîËªü„Å´ÊåáÂÆö„Åß„Åç„Åæ„Åô„ÄÇ

‰ª•‰∏ã„ÅØ`id`„ÄÅ`name`„ÄÅ`age`„ÄÅ`birthday`„ÅÆ„Ç≠„Éº„ÇíÊåÅ„Å§ÊßãÈÄ†‰Ωì„ÇíÁîüÊàê„Åô„ÇãÂ†¥Âêà„ÅÆ‰æã„Åß„Åô„ÄÇ

```ts
fc.record({
  id: fc.uuidV(4),
  name: fc.constantFrom('Paul', 'Luis', 'Jane', 'Karen'),
  age: fc.nat(99),
  birthday: fc.date({min: new Date("1970-01-01T00:00:00.000Z"), max: new Date("2100-12-31T23:59:59.999Z")})
}

// Âá∫Âäõ‰æã
// ‚Ä¢ {"id":"00000010-e2be-4b98-8d3a-944affffffe2","age":4,"birthday":new Date("2100-12-31T23:59:59.959Z")}
// ‚Ä¢ {"id":"00000001-0005-4000-bfff-fff03ec646bf","age":48,"birthday":new Date("2069-12-20T11:27:18.998Z")}
// ‚Ä¢ {"id":"00000003-ffed-4fff-bfff-fff400000012","name":"Jane","birthday":new Date("2028-02-06T17:18:26.370Z")}
// ‚Ä¢ {"id":"fa5630bc-000f-4000-8000-001600000018","age":0,"birthday":new Date("1970-01-01T00:00:00.039Z")}
// ‚Ä¢ {"id":"00000018-ffee-4fff-8a22-b8770000001b","age":93}
// ‚Ä¢ ‚Ä¶
```

ÊåáÂÆöÂá∫Êù•„ÇãÊù°‰ª∂„ÅÆË©≥Á¥∞„ÅØ„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÁ¢∫Ë™ç„Åè„Å†„Åï„ÅÑ„ÄÇ

https://github.com/dubzzz/fast-check/blob/main/documentation/Arbitraries.md#combinators

‰ªñ„Å´„ÇÇ„ÄÅ„ÉÜ„Çπ„ÉàÂ§±ÊïóÊôÇ„ÅÆ„ÉÜ„Çπ„Éà„Ç±„Éº„Çπ„ÅÆÂÜçÁèæÊ©üËÉΩ„Å™„Å©„ÄÅProperty Based Testing „Å´ÂøÖË¶Å„Å™Ê©üËÉΩ„ÅåÁ∂≤ÁæÖ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

# FizzBuzz „Åß Property Based Testing „ÇíË©¶„Åó„Å¶„Åø„Çã

ÂÆöÁæ©„ÇíË™≠„Çì„Åß„ÇÇ„ÅÑ„Åæ„ÅÑ„Å°‰æøÂà©„Åï„ÅåÂàÜ„Åã„Çä„Å´„Åè„ÅÑ„ÅÆ„Åß„ÄÅFizzBuzz „ÅßË©¶„Åó„Å¶„Åø„Åæ„Åó„Åü„ÄÇ
FizzBuzz „ÅÆÊù°‰ª∂„ÅØËâ≤„ÄÖ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ‰ªäÂõû„ÅØÊï¥Êï∞„Çí‰∏é„Åà„ÅüÂ†¥Âêà„Å´‰ª•‰∏ã„ÅÆÊù°‰ª∂„ÅßÂÄ§„ÇíËøî„ÅôÈñ¢Êï∞„Å®„Åó„Åæ„Åô„ÄÇ

- 3 „ÅÆÂÄçÊï∞„Åß„Åã„Å§ 5 „ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØ`FizzBuzz`
- 3 „ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØ`Fizz`
- 5 „ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØ`Buzz`
- „Åù„Çå‰ª•Â§ñ„ÅØ‰∏é„Åà„Çâ„Çå„ÅüÊï∞ÂÄ§„ÇíËøî„Åô

ÂÆüË£Ö„ÅØ„Åì„Å°„Çâ„Åß„Åô„ÄÇ

```ts
type FizzBuzzReturn = "FizzBuzz" | "Fizz" | "Buzz" | number

export const fizzBuzz = (num: number): FizzBuzzReturn => {
  if(num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  }
  if(num % 3 === 0) {
    return "Fizz"
  }
  if(num % 5 === 0) {
    return "Buzz"
  }
  return num
}
```

„Åì„ÅÆÈñ¢Êï∞„ÇíÊÑöÁõ¥„Å´„ÉÜ„Çπ„Éà„Åó„ÅüÂ†¥Âêà„ÅÆ„Ç≥„Éº„Éâ„Åå„Åì„Å°„Çâ„Åß„Åô„ÄÇ

```ts
describe('fizzBuzz', () => {
  test('3„ÅÆÂÄçÊï∞„Åß„Åã„Å§5„ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØFizzBuzz„Å®Ëøî„Åô', () => {
    expect(fizzBuzz(15)).toBe('FizzBuzz')
    expect(fizzBuzz(90)).toBe('FizzBuzz')
    expect(fizzBuzz(180)).toBe('FizzBuzz')
  })

  test('3„ÅÆÂÄçÊï∞„Åß„Åã„Å§5„ÅÆÂÄçÊï∞„Åß„ÅØ„Å™„ÅÑÂ†¥Âêà„ÅØFizz„Å®Ëøî„Åô', () => {
    expect(fizzBuzz(3)).toBe('Fizz')
    expect(fizzBuzz(9)).toBe('Fizz')
    expect(fizzBuzz(63)).toBe('Fizz')
  })

  test('5„ÅÆÂÄçÊï∞„Åß„Åã„Å§3„ÅÆÂÄçÊï∞„Åß„ÅØ„Å™„ÅÑÂ†¥Âêà„ÅØBuzz„Å®Ëøî„Åô', () => {
    expect(fizzBuzz(5)).toBe('Buzz')
    expect(fizzBuzz(35)).toBe('Buzz')
    expect(fizzBuzz(80)).toBe('Buzz')
  })

  test('3„ÅÆÂÄçÊï∞„Åß„ÇÇ5„ÅÆÂÄçÊï∞„Åß„ÇÇ„Å™„ÅÑÂ†¥Âêà„ÅØÂºïÊï∞„ÅÆÊï∞ÂÄ§„Çí„Åù„ÅÆ„Åæ„ÅæËøî„Åô', () => {
    expect(fizzBuzz(1)).toBe(1)
    expect(fizzBuzz(26)).toBe(26)
    expect(fizzBuzz(98)).toBe(98)
  })
})
```

Jest „ÅÆ`test.each`„Çí‰Ωø„Å£„Å¶ Parameterized Test ÁöÑ„Å´Êõ∏„Åë„Å∞„ÇÇ„Å£„Å®ÂäπÁéáÁöÑ„Å´Êõ∏„Åë„Åù„ÅÜ„Åß„Åô„Åå„ÄÅ„Åù„Çå„Åß„ÇÇÊ§úË®º„Éë„Çø„Éº„É≥„Å´„ÅØÈôêÁïå„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åü„Å®„Åà„Å∞„ÄÅ10,000,000 Á≠âÂ§ß„Åç„Å™Êï∞„Çí‰∏é„Åà„ÅüÂ†¥Âêà„Å´ÂÆü„ÅØ„Éê„Ç∞„Åå„ÅÇ„Çã„Åã„ÇÇÁü•„Çå„Åæ„Åõ„Çì„Åå„ÄÅÊ§úË®º„Åó„Çà„ÅÜ„Å®„Åô„Çã„Å´„ÅØÁÑ°ÁêÜ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

„Åì„Çå„Çí fast-check „Çí‰Ωø„Å£„Å¶ Property Based Testing „ÅßÊõ∏„ÅçÁõ¥„Åô„Å®„Åì„Å°„Çâ„Åß„Åô„ÄÇ


```ts
describe('fizzBuzz', () => {
  test('3„ÅÆÂÄçÊï∞„Åß„Åã„Å§5„ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØFizzBuzz„Å®Ëøî„Åô', () => {
    fc.assert(
      fc.property(fc.nat(), num => {
        fc.pre(num % 3 === 0)
        fc.pre(num % 5 === 0)
        expect(fizzBuzz(num)).toBe('FizzBuzz')
      })
    )
  })

  test('3„ÅÆÂÄçÊï∞„Åß„Åã„Å§5„ÅÆÂÄçÊï∞„Åß„ÅØ„Å™„ÅÑÂ†¥Âêà„ÅØFizz„Å®Ëøî„Åô', () => {
    fc.assert(
      fc.property(fc.nat(), num => {
        fc.pre(num % 3 === 0)
        fc.pre(num % 5 !== 0)
        expect(fizzBuzz(num)).toBe('Fizz')
      })
    )
  })

  test('5„ÅÆÂÄçÊï∞„Åß„Åã„Å§3„ÅÆÂÄçÊï∞„Åß„ÅØ„Å™„ÅÑÂ†¥Âêà„ÅØBuzz„Å®Ëøî„Åô', () => {
    fc.assert(
      fc.property(fc.nat(), num => {
        fc.pre(num % 5 === 0)
        fc.pre(num % 3 !== 0)
        expect(fizzBuzz(num)).toBe('Buzz')
      })
    )
  })

  test('3„ÅÆÂÄçÊï∞„Åß„ÇÇ5„ÅÆÂÄçÊï∞„Åß„ÇÇ„Å™„ÅÑÂ†¥Âêà„ÅØÂºïÊï∞„ÅÆÊï∞ÂÄ§„Çí„Åù„ÅÆ„Åæ„ÅæËøî„Åô', () => {
    fc.assert(
      fc.property(fc.nat(), num => {
        fc.pre(num % 3 !== 0)
        fc.pre(num % 5 !== 0)
        expect(fizzBuzz(num)).toBe(num)
      })
    )
  })
})
```

`fc.pre()`„ÅØÂºïÊï∞„Å´Ê∏°„Åó„ÅüÊù°‰ª∂Âºè„ÅåÊ≠£„ÅÆÂ†¥Âêà„Å´Ê§úË®º„Çí„Çπ„Ç≠„ÉÉ„Éó„Åô„ÇãÈñ¢Êï∞„Åß„Åô„ÄÇ

:::message
‰ªäÂõû„ÅØÂÄ§„ÅÆË™øÊï¥„Å´[pre](https://github.com/dubzzz/fast-check/blob/main/documentation/Tips.md#filter-invalid-combinations-using-pre-conditions)„Çí‰Ωø„Å£„Åü„ÅÆ„Åß„Åô„Åå„ÄÅ[filter](https://github.com/dubzzz/fast-check/blob/main/documentation/AdvancedArbitraries.md#filter-values)„ÅßË™øÊï¥„Åô„ÇãÊñπÊ≥ï„ÇÑ„ÄÅ[map](https://github.com/dubzzz/fast-check/blob/main/documentation/AdvancedArbitraries.md#transform-values)„Çí‰Ωø„ÅÑÁîüÊàêÂÄ§„ÇíÂä†Â∑•„Åô„ÇãÊñπÊ≥ï„Å™„Å©Êßò„ÄÖ„Å™ÊâãÊ≥ï„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
:::

fast-check „Åß„ÅØ„ÄÅÊ®ôÊ∫ñ„ÅßÂêÑ„Ç¢„Çµ„Éº„Éà„Å´ÂØæ„Åó„Å¶ 100 Âõû„ÅÆ„ÉÜ„Çπ„Éà„ÇíË°å„ÅÜ„ÅÆ„Åß„ÄÅÂâç„ÅÆ„ÉÜ„Çπ„Éà„Å´ÊØî„Åπ„Å¶„Åã„Å™„Çä„Éê„Ç∞„ÇíË¶ã„Å§„Åë„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åô„ÄÇ

ÂÆüÈöõ„Å´`console.log()`„ÅßÂºïÊï∞„Å´‰∏é„Åà„Çâ„Çå„ÇãÊï∞ÂÄ§„ÇíÂá∫Âäõ„Åó„Å¶„Åø„Çã„Å®‰ª•‰∏ã„ÅÆ„Å®„Åä„Çä„Åß„Åó„Åü„ÄÇ
„Åã„Å™„ÇäÂπÖÂ∫É„ÅÑÂÄ§„ÅßÊ§úË®º„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åå„Çè„Åã„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

```ts
  test('3„ÅÆÂÄçÊï∞„Åß„Åã„Å§5„ÅÆÂÄçÊï∞„ÅÆÂ†¥Âêà„ÅØFizzBuzz„Å®Ëøî„Åô', () => {
    const args: number[] = []
    fc.assert(
      fc.property(fc.nat(), num => {
        fc.pre(num % 3 === 0)
        fc.pre(num % 5 === 0)
        args.push(num)
        expect(fizzBuzz(num)).toBe('FizzBuzz')
      })
    )
    console.log(args)
  })
    // Âá∫Âäõ ‚Üì
    //  [
    //             15,  5154547515, 14586534285, 22067216670, 11463699000,
    //             15,         150,         405, 24544203645, 15800293260,
    //    32212254585, 25782162600, 19507501455, 13932433035, 32212254465,
    //            240,  5894415900,  2475945960,  7330825875, 32212254630,
    //    29224485450,         240, 29473233660,         390,  8133294240,
    //    30365121465, 32212254420, 10316546130, 15568267905, 14022727380,
    //            450, 28486437015,          90, 16389325920,  1924987605,
    //    31884552180,         450,         330, 32212254345,   817391010,
    //    22209798855, 32212254330, 20007343365, 24800565105,   633917550,
    //    27951496950,  8008404135,  2756876070,  7432837200, 16562011815,
    //    13111531425,         165,   372921390, 28326375945, 30538334280,
    //    25317536220,         180, 18038638425, 32212254675,         180,
    //    21342528135, 32212254585, 13922248920, 11444807085, 31396742475,
    //    32212254705, 21541350405, 26881353345, 30568548300, 32212254705,
    //    32212254285,  7907215245, 18255486015,  8624909925,  8417630310,
    //             90,  4360582020,         300, 13438857525,         120,
    //    19155723930, 32212254555,  8267478945, 32212254270,         285,
    //    16459253745, 20202074865,  1353827010,  6384282060, 25864471440,
    //    15372941925, 11600763255,   928093095, 32212254465,  8311722375,
    //    18542294235, 23017659225,         240, 21950595210,  4564644165
    //  ]
```


# „Åä„Çè„Çä„Å´

‰ª•‰∏ä„ÄÅProperty Based Testing & fast-check „ÅÆÁ∞°Âçò„Å™Á¥π‰ªã„Åß„Åó„Åü„ÄÇ
Property Based Testing „ÅØ‰ªäÂõûÂàù„ÇÅ„Å¶Ë©¶„Åó„Å¶„Åø„Åü„ÅÆ„Åß„Åô„Åå„ÄÅ‰∫àÊÉ≥‰ª•‰∏ä„Å´‰æøÂà©„Å´‰Ωø„Åà„Åù„ÅÜ„Å™„ÅÆ„Åß„ÄÅËâ≤„ÄÖ‰ªäÂæå„ÇÇË©¶„Åó„Å¶„ÅÑ„Åç„Åü„ÅÑ„Åß„Åô„ÄÇ
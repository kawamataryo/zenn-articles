---
title: "esa を CMS に VuePress v2 でドキュメントサイトを作る"
emoji: "🐥"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["esa", "vuepress", "vue", "typescript"]
published: false
---

esa を CMS に VuePress v2 でドキュメントサイトを作る機会があったので、メモ。

# 何を作った？

# なぜesa？

社内のドキュメント管理ツールとして esa を使っていて、esa に社内文書がまとまっていた & ドキュメント執筆のメインとなるビジネスサイドのメンバーが esa での MarkDown 執筆に慣れていたからです。

# 基本構成

# 工夫ポイント

## esaから送られるファイルを直接利用せず、ローカルPluginで動的にページを生成する

esa の webhook から生成されるファイルのパスを`docs/hoge`配下にすれば、ただビルドするだけで自動的にページが作られるのですが、その方式だといくつか問題がありました。

### 課題感

**URL が esa の`記事ID.html.html`となる**
VuePress の個別ページの URL は、ファイルパスとファイル名から生成されます。そして、webhook で生成される esa の記事は、`74457.html.md`です。これをこのままビルドすると、個別ページの URL が、`<ディレクトリ名>/74457.html.html`となります（ビルド時に`md`の拡張子が`html`になるらしい）。閲覧に支障はないのですが、ちょっと見栄えが悪いですよね。

**FrontMatter を変更できない**
esa の webhook はとても気が利いていて、以下のような FrontMatter を生成ファイルにつけてくれます。


```md
---
title: <記事名>
category: <カテゴリ>
tags: <タグ>
created_at: <作成日>
updated_at: <更新日>
published: true
number: <記事ID>
---
```

しかし、VuePress の FrontMatter と微妙に異なる部分があります（更新日が updated_at ではなく lastUpdated など）。また、個別に FrontMatter を編集したいという場合もあると思います。そのようなときに esa の吐き出す MD ファイルをそのまま使うと実現出来ないです。

### 解決策

**で動的にページを生成せするです





## サイドメニューを動的につくる

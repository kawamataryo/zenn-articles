---
title: "真面目にOSSを公開する際にやってみたこと・意識したこと"
emoji: "📦"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["vue", "github", "githubActions", "oss"]
published: false
---
初めて真面目に自分のコードを OSS として公開するうえで、色々試行錯誤したことを書きます。

:::message
「真面目に」の基準は過去の自分が公開したリポジトリに比べてです 🙏 まだまだ至らないところ多いと思うので、気軽にコメント頂けると嬉しいです。
:::

# 何を公開した？
[Vue Word Highlighter](https://github.com/kawamataryo/vue-word-highlighter) という Vue.js のコンポーネントライブラリを公開しました。
機能はとても単純で、文字列と検索クエリを渡すと、検索クエリに合致した文字列の一部をハイライト（`<mark>`タグ又は任意のタグ囲む）するというものです。

https://github.com/kawamataryo/vue-word-highlighter

業務で検索ハイライトの実装を試していた際に良さそうな実装方法を見つけ、せっかくだから汎用的な機能にして OSS として公開してみようと思い立ちました。
そして公開するなら真面目に環境整備して皆に使ってもらえるものにしたいと思いました。


# 公開までにやってみたこと

公開までにやってみたことを書きます。

## READMEをちゃんと書く
人は見た目が 9 割ではないですが、OSS の顔と言ったら README なので、ひと目でちゃんとしてそうな OSS 感を出すために README は自分なりに色々工夫してみました。

### ロゴを作る
使われている OSS にはほぼロゴがある気がします。なので、Google Font で良さそうな書体を適当に探しハイライトしただけの単純なものですが、ロゴを作成しました。ロゴの完成度はともかく、あるのとないのでは大分印象が変わると思います。

![](https://i.gyazo.com/eed30a7a5c6d5885f00a8e1326561005.png =400x)

### Shields.ioでバッジを作る
Shields.io の API で CI の状況や npm の download 数などのバッジを作りました。最新バージョンがなんなのか、どれくらい利用者がいるのかひと目で分かって良いです。

![](https://i.gyazo.com/f2b732186b0f016b11c598d597fff467.png =500x)

https://shields.io/


### サンプルコードを多めに丁寧に使い方を書く
当たり前ですが、初めて見た人が使いやすいように、Install から簡単な使い方、オプショナルな設定まで自分なりに丁寧に書いてみました。英語は、DeepL 翻訳全開なので、あまりあっているか自信がないですが、サンプルコードを多めに書くことで、なんとか雰囲気は伝わるのではと思います。


## CI環境を整備する
- テストの話
- ESLint の話
- husky
- GitHub Actions の話

## CD環境を整備する
- commit-lint
- Semantic-release の話
- GitHub Actions の話


## すぐ使えるデモサイトを作る
何か機能を試す際にいちいちローカルに落とす必要なくサクッと試せると便利です。
なので今回の vue-word-highlighter でも機能をライトに試せるデモサイトをしっかり目に作りました。

https://kawamataryo.github.io/vue-word-highlighter/

デモサイト自体も同リポジトリで管理して、GitHub Actions で GitHub Pages にデプロイしているので低コストです。

また、デモサイト以外にも実際にコードを書き換えながら試せる場所があると便利かなと思い Code Sandbox も用意しました。

@[codesandbox](https://codesandbox.io/embed/vue3-word-highlighter-example-u2bhe?autoresize=1&fontsize=14&hidenavigation=1&module=%2Fsrc%2FApp.vue&theme=dark)

## 既存OSSとの差別化を考える
機能はとても単純で、割とよくある UI で使われるものなので類似ライブラリは色々ありました。それらと同じものを公開しても、使ってもらえる可能性は少ないと思います。
なので今回の差別化として、Vue3 でも Vu2 でも使えるというのを差別化ポイントにしました。
おそらく今は Vue2 から Vue3 への移行期で、新規に追加する Plugin については移行時に障害にならないかを検討するのかなと思い、その際に障害にならないものがよいと考えたのがきっかけです。

機能的には Vue2、Vue3 両方に対応したライブラリを作れる [Vue-demi](https://github.com/vueuse/vue-demi) を内部的に使って実現しています。

https://github.com/vueuse/vue-demi


## ディレクトリ構成をきれいにする
- mono レポにした話


## 依存モジュールの更新環境
- renovate の導入

## 広報を頑張る
- Twitter での告知、英語での告知、&この記事
- madewith vue への登録

# 終わりに
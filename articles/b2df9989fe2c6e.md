---
title: "webpack to Rspack"
emoji: "🦀"
type: "tech"
topics: ["webpack", "rspack", "vue"]
published: false
---

プロダクトのビルドツールを webpack から rspack に移行したので、その経緯と注意点をまとめます。

# Rspackとは？

**Rustで書かれた高速なJavaScriptのバンドルツール。** webpackエコシステムとの強力な互換性を持ち、webpackからの移行が容易。
2024/08/24にv1.0.0がリリースされた。

https://rspack.dev/

# なぜRspackに移行したのか？

HMR・ビルド速度改善のためwebpackの移行を検討していたが、プロダクトがwebpack依存の構成（django-webpack-loaderでwebpackの出力するstatsを読み込み、djangoがentrypointとなるhtmlを配信する構成）で、Viteやその他のビルドツールへの移行が困難だった。  **Rspackであればwebpackのプラグインがそのまま動き、移行が容易**なためRspackを選択。

# 移行方法

移行方法は、rspackの公式ドキュメントの migrate from webpack をそのまま参考にして進めました。それだけで、devもproducitonビルドも通ったのですごい。

https://rspack.dev/guide/migration/webpack

:::message alert
productionビルドはビルドは通るものの、後述の通りバンドル結果が壊れていることがあるので注意。
:::


# 移行結果

## 対象プロダクト

Django + Vue.jsのシンプルなSPA。アセットはCircleCIでビルドして、S3に配置し、CloudFrontで配信。

バンドル対象

|  | ファイル数 |
|---|:---:|
|![](https://img.shields.io/badge/-TypeScript-007ACC?style=flat-square&logo=typescript&logoColor=white) | 390 |
|![](https://img.shields.io/badge/-Vue.js-4FC08D?style=flat-square&logo=vue.js&logoColor=white) | 360 |
|![](https://img.shields.io/badge/-otherfile-cccccc?style=flat-square&logo=media&logoColor=black) | 100 |


## ビルド時間

### development

- webpack: 18.5秒
- rspack: 7.5秒

### production

- webpack: 18.5秒
- rspack: 7.5秒

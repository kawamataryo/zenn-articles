---
title: "[Minecraft x ChatGPT] ä½œã‚ŠãŸã„ã‚‚ã®ã‚’ä¼ãˆã‚‹ã¨é­”æ³•ã¿ãŸã„ã«å®Ÿç¾ã—ã¦ãã‚Œã‚‹ãƒãƒ³ãƒ‰ã‚’ä½œã‚‹"
emoji: "ğŸª„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["minecraft", "openai", "python"]
published: false
---

æ¯å­ã¨ä¸€ç·’ã«éŠã³ãŸã„ãªã¨ã€Minecraft ã¨ ChatGPT ã‚’ç¹‹ã’ã¦ã€ã‚„ã‚ŠãŸã„ã“ã¨ã‚’æ—¥æœ¬èªã§ä¼ãˆã‚‹ã¨ã„ã„æ„Ÿã˜ã«å®Ÿç¾ã—ã¦ãã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ä½œã‚Šã¾ã—ãŸ

# ğŸª„ ä½œã£ãŸã‚‚ã®

`/py magic` ã«ç¶šã‘ã¦ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ä¼ãˆã‚‹ã¨ã€ã„ã„æ„Ÿã˜ã«å®Ÿç¾ã—ã¦ãã‚Œã¾ã™ã€‚

ï¼ˆå®¶ã‚’ã¤ãã‚‹ä¾‹ï¼‰

![](https://i.gyazo.com/d83ec1fd5ba5a4e25e458767882df252.gif =560x)

ï¼ˆæ°´æµã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼?ã‚’ã¤ãã‚‹ä¾‹ï¼‰

![](https://i.gyazo.com/2aa4c91a4d57a839171e5408631baeb2.gif =560x)

# ğŸ› ï¸ å®Ÿè£…

äº‹å‰ã« Minecraft ã§ Python ã‚’å®Ÿè¡Œã§ãã‚‹ç’°å¢ƒã‚’æ•´ãˆã¾ã™ã€‚

https://files.minecraftforge.net/net/minecraftforge/forge/
https://github.com/arpruss/raspberryjammod

`mcpi` ã§ Minecraft ã«æ¥ç¶šã§ãã‚Œã° OK ã§ã™ã€‚

æ¬¡ã«å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
pip install mistletoe openai mcpi
```

ãã—ã¦ã€`mcpi`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã‚³ãƒ¼ãƒ‰ã§ `magic.py` ã‚’ä½œã‚Šä¿å­˜ã—ã¾ã™ã€‚

```python:magic.py
import openai
import sys
from mcpi import minecraft
from mistletoe import Document, block_token
from mistletoe.block_token import CodeFence

mc = minecraft.Minecraft.create()

def get_code_blocks(text: str):
    doc = Document(text)

    code_blocks = []
    for token in doc.children:
        if isinstance(token, CodeFence):
            code_blocks.append(token.children[0].content)

    return "\n\n".join(code_blocks)

def think_code(prompt: str):
    system_prompt = f"""
Please write Python code to implement the instructions below in Minecraft.
In addition, please observe the following rules when outputting the code.

- You must use the `mcpi` library to connect to Minecraft.
- Your Python version must be 3.x.
- Your Minecraft version is 1.12.2.
- No comments in the code.
- The output code must be a single Python file.
- When building, build 20 squares ahead in the direction the player is looking.
- The output code should be in a form that can be executed by exec

# Instructions:
{prompt}

"""

    openai.api_key = "YOUR API KEY"
    completion = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=[
      {"role": "system", "content": "You are a talented Python programmer and Minecraft builder.You can use mcpi to control Minecraft"},
      {"role": "user", "content": system_prompt}
    ])

    return completion.choices[0].message.content

def main():
    # å¼•æ•°ã‹ã‚‰promptã‚’å–å¾—
    prompt = sys.argv[1]
    mc.postToChat(f"Prompt: {prompt}")

    # chat completion APIã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
    generated_text = think_code(prompt)
    # APIã®å‡ºåŠ›çµæœã‹ã‚‰ã‚³ãƒ¼ãƒ‰éƒ¨åˆ†ã‚’ãƒ†ã‚­ã‚¹ãƒˆã§æŠ½å‡º
    code = get_code_blocks(generated_text)

    try:
        exec(code)
        mc.postToChat("Completed")
    except Exception as e:
        mc.postToChat(f"Error: {e}")


main()
```

å¼•æ•°ã§å—ã‘å–ã£ãŸ prompt ã‚’ Chat Completion API ã«æ¸¡ã—ã¦ã€ãã®å‡ºåŠ›çµæœã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¦ exec ã§å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

:::message
ã©ã‚“ãªã‚³ãƒ¼ãƒ‰ãŒè¿”ã£ã¦ãã‚‹ã®ã‹åˆ†ã‹ã‚‰ãªã„ã®ã«ã€exec ã§å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ãƒ¤ãƒã„ã‚³ãƒ¼ãƒ‰ãªã®ã§ã€å®Ÿè¡Œã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™ ğŸ™
:::

ã‚ã¨ã¯ã€Minecraft ã«å…¥ã‚Š `/py magic` ã§ã‚„ã‚ŠãŸã“ã¨ã‚’ä¼ãˆã‚‹ã ã‘ã§ã™ã€‚

# ãŠã‚ã‚Šã«

ã¾ã  Prompt ã®è©°ã‚ãŒç”˜ã„ã®ã§ã€ãªã‹ãªã‹ã†ã¾ãå»ºç‰©ã‚’ä½œã£ã¦ãã‚Œãªã„ã“ã¨ãŒå¤šã„ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšæ¯å­ã¨éŠã¹ã‚‹ã¾ã§ã¯ä½œã‚ŒãŸã®ã§ãƒ¨ã‚·ï¼

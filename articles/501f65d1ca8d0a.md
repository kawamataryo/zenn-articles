---
title: "vueã®templateã‚¿ã‚°ã¨scriptã‚¿ã‚°ã®ä½ç½®ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã ã‘ã®npmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å…¬é–‹ã—ãŸ"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ts", "js"]
published: false
---

```js
const glob = require('glob');
const fs = require('fs');

const REPLACE_PATTERN = /^(<template.*>[\s\S]*<\/template>)\s*(<script.*>[\s\S]*<\/script>)([.\s\S]*)/;
const SUBSTER = "$2\n\n$1$3"

const main = () => {
  let count = 0
  glob('./**/*.vue', {ignore: 'node_modules'}, (err, files) => {
    console.log("start\n-----------------");
    files.forEach(f => {
      const text = fs.readFileSync(f, "utf8");

      if(REPLACE_PATTERN.test(text)) {
        const replacedText = text.replace(REPLACE_PATTERN, SUBSTER)
        fs.writeFileSync(f, replacedText);

        count+=1
        console.log(`replaced: ${f}`);
      }
    })
    console.log("-----------------\nend");
    console.log(`${count} files replaced.`);
  });
}

main();
```